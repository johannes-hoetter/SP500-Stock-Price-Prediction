<!DOCTYPE html>
<html lang="en">
<head>
    <title>"SP 500 Predictor"</title>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    {% load staticfiles %}
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <!-- Chart JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>

</head>
<body>
    <header>
        <h1>STANDARD & POOR'S 500 PREDICTOR</h1>
        <hr>
    </header>

    <div class="container">
        <div id="sp500_image" class="box">
            <!-- plot the visualizations for the given Stock -->
            <canvas id="stock_visualization" width="100" height="100"></canvas>
            <script>
                var dates = {{ data_dates }};
                var prices = {{ data_prices}};
                var preds = {{ data_preds }};
                var symbol = "{{ data_symbol }}";
                var ctx = document.getElementById("stock_visualization").getContext('2d');
                var myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: dates,
                        datasets: [{
                            label: 'actual prices',
                            data: prices,
                            fill: false,
                            borderColor: 'rgba(255, 99, 132, 0.2)'
                        },{
                            label: 'predicted prices',
                            data: preds,
                            fill: false,
                            borderColor: 'rgba(0, 99, 132, 0.2)'
                        }]
                    },
                    options: {
                        responsive: true,
                        title: {
                            display: true,
                            text: 'Comparison of Historical Data for '.concat(symbol)
                        },
                        tooltips: {
                            mode: 'index',
                            intersect: false,
                        },
                        hover: {
                            mode: 'nearest',
                            intersect: true
                        },
                        scales: {
                            xAxes: [{
                                ticks: {
                                    autoSkip: true
                                },
                                display: true,
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Date'
                                }
                            }],
                            yAxes: [{
                                display: true,
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Price per Share in USD'
                                }
                            }]
                        }
                    }
                });
            </script>
        </div>

        <!-- User Input -->
        <div id="user_input">
            <div class="box name_stocks">
                <h4>Give Stock Symbol as Input</h4>
                <form method="post">
                    {% csrf_token %}
                    {{ stock_form }}
                    <button type="submit">Submit</button>
                </form>
                <p>Example: AMZN for Amazon Share</p>

                <button class="collapsible">Results</button>
                    <div class="content">
                        <table>
                            <tr>
                                <th>Symbol</th>
                                <th>Predicted Value for tomorrow</th>
                            </tr>
                            {% for symbol, value in preds.items %}
                                <tr>
                                    <td>{{ symbol }}</td>
                                    <td>{{ value }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
            </div>

            <div class="box num_stocks">
                <h4>Get Recommendations based on the AI</h4>
                <form method="post">
                    {% csrf_token %}
                    {{ num_form }}
                    <button type="submit">Submit</button>
                </form>
                <p>If values below 1 are entered, each predictable Stock will be returned, the most profitable first.</p>

                <button class="collapsible">Results</button>
                    <div class="content">
                        <table>
                            <tr>
                                <th>Symbol</th>
                                <th>Predicted Value for tomorrow</th>
                            </tr>
                            {% for symbol, value in preds.items %}
                                <tr>
                                    <td>{{ symbol }}</td>
                                    <td>{{ value }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
            </div>
        </div>


        <!-- List of Symbols which can be used as Input -->
        <div id="available_models">
            <button class="collapsible">Available Models for Stock Prediction</button>
                <div class="content">
                     <ul class="cols" rel="12">
                    {% for model in models %}
                        <li>{{ model }}</li>
                    {% endfor %}
                     </ul>
                </div>
        </div>
    </div> <!-- End of container -->

    <footer class="footer-distributed">
        <div class="footer-right">

            <a href="https://www.xing.com/profile/Johannes_Hoetter4/cv?sc_o=mxb_p"><i class="fab fa-xing"></i></a>
            <a href="https://github.com/johannes-hoetter"><i class="fab fa-github"></i></a>

        </div>

        <div class="footer-left">

            <p class="footer-links">
                <!-- for future links -->
            </p>

            <p>Johannes HÃ¶tter &copy; 2018</p>
        </div>
    </footer>



    <script src="{% static 'javascript/collapse.js' %}"></script>
    <script src="{% static 'javascript/multiple_column_lists.js' %}"></script>


</body>
</html>